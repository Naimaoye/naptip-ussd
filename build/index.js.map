{"version":3,"sources":["../src/index.js"],"names":["require","app","App","port","con","connect","err","console","log","query","createIncidenceTable","result","get","Ussd","registerUssdDetails","listen","token"],"mappings":";;;;AAAA;;AACA;;AAEA;;AAEA;;AACA;;AAFAA,OAAO,CAAC,sBAAD,CAAP;;AAIA,IAAMC,GAAG,GAAG,IAAIC,WAAJ,EAAZ;AAEA,IAAMC,IAAI,GAAG,IAAb;;AAEAC,cAAIC,OAAJ,CAAY,UAACC,GAAD,EAAS;AACnB,MAAGA,GAAH,EAAO;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA;AACD,GAJkB,CAKnB;;;AACAJ,gBAAIK,KAAJ,CAAUC,wBAAV,EAAgC,UAAUJ,GAAV,EAAeK,MAAf,EAAuB;AACrD,QAAIL,GAAJ,EAAS;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAFD,MAEO;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACD;AACF,GAND;;AAOAD,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACD,CAdD;;AAiBAP,GAAG,CAACW,GAAJ,CAAQ,QAAR,EAAkBC,qBAAKC,mBAAvB,EACCC,MADD,CACQZ,IADR,EACc,UAAAa,KAAK,EAAI;AACrBA,EAAAA,KAAK,GACLT,OAAO,CAACC,GAAR,6BAAiCL,IAAjC,EADK,GAELI,OAAO,CAACC,GAAR,oCAAwCL,IAAxC,EAFA;AAGD,CALD","sourcesContent":["import { App } from '@sifrr/server';\nimport mysql from 'mysql';\n\nimport Ussd from './controllers/registerUssd/ussd-menu';\nrequire('./utils/redis-config');\nimport { createIncidenceTable, createIndex } from './models/db.report';\nimport { con } from './utils/configDB';\n\nconst app = new App();\n\nconst port = 9975;\n\ncon.connect((err) => {\n  if(err){\n    console.log('Error connecting to Db');\n    return;\n  }\n  // create table\n  con.query(createIncidenceTable, function (err, result) {\n    if (err) {\n      console.log(err);\n    } else {\n      console.log('');\n    }\n  });\n  console.log('');\n});\n\n\napp.get('/proxy', Ussd.registerUssdDetails)\n.listen(port, token => {\n  token ?\n  console.log(`Listening to port ${port}`) :\n  console.log(`Failed to listen to port ${port}`);\n});\n\n"],"file":"index.js"}